<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car Price Prediction</title>
</head>
<body>
    <h1>Car Price Prediction</h1>

    <label>Make:
        <select id="make" onchange="updateOptions()">
            <option value="" disabled selected>Select Make</option>
            <option value="Audi">Audi</option>
            <option value="BMW">BMW</option>
            <option value="Chevrolet">Chevrolet</option>
            <option value="Ford">Ford</option>
            <option value="Mercedes">Mercedes</option>
            <option value="Volkswagen">Volkswagen</option>
        </select>
    </label><br>

    <label>Year:
        <select id="year">
            <option value="" disabled selected>Select Year</option>
        </select>
    </label><br>

    <label>Engine Size:
        <select id="engine_size">
            <option value="" disabled selected>Select Engine Size</option>
        </select>
    </label><br>

    <label>Mileage:
        <select id="mileage">
            <option value="" disabled selected>Select Mileage 
Range</option>
            <option value="1">0 - 25,000 miles</option>
            <option value="2">25,001 - 50,000 miles</option>
            <option value="3">50,001 - 100,000 miles</option>
            <option value="4">100,001 - 150,000 miles</option>
            <option value="5">150,001 - 200,000 miles</option>
            <option value="6">200,001+ miles</option>
        </select>
    </label><br>

    <label>Doors:
        <select id="doors">
            <option value="" disabled selected>Select Doors</option>
        </select>
    </label><br>

    <label>Previous Owners:
        <select id="owners">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </label><br>

    <label>Fuel Type:
        <select id="fuel_type">
            <option value="" disabled selected>Select Fuel Type</option>
        </select>
    </label><br>

    <label>Transmission:
        <select id="transmission">
            <option value="" disabled selected>Select 
Transmission</option>
        </select>
    </label><br>

    <button onclick="sendPredictionRequest()">Predict</button>
    <h2 id="result"></h2>

    <script>
        // Car make-specific options
        const carOptions = {
            "Audi": {
                "years": [2010, 2015, 2020, 2023],
                "engine_sizes": ["2.0L", "2.5L", "3.0L"],
                "fuel_types": ["Petrol", "Diesel"],
                "transmissions": ["Manual", "Automatic"],
                "doors": [2, 4]
            },
            "BMW": {
                "years": [2012, 2016, 2021],
                "engine_sizes": ["2.0L", "3.0L"],
                "fuel_types": ["Petrol", "Diesel", "Hybrid"],
                "transmissions": ["Automatic", "Semi-Automatic"],
                "doors": [2, 4]
            },
            "Chevrolet": {
                "years": [2008, 2013, 2019, 2022],
                "engine_sizes": ["1.6L", "2.0L", "2.5L"],
                "fuel_types": ["Petrol", "Hybrid"],
                "transmissions": ["Automatic"],
                "doors": [2, 4]
            },
            "Ford": {
                "years": [2005, 2011, 2018, 2023],
                "engine_sizes": ["1.6L", "2.0L", "2.5L"],
                "fuel_types": ["Petrol", "Diesel"],
                "transmissions": ["Manual", "Automatic"],
                "doors": [2, 4, 5]
            },
            "Mercedes": {
                "years": [2010, 2015, 2020],
                "engine_sizes": ["2.0L", "2.5L", "3.0L", "4.2L"],
                "fuel_types": ["Petrol", "Diesel", "Electric"],
                "transmissions": ["Automatic", "Semi-Automatic"],
                "doors": [2, 4]
            },
            "Volkswagen": {
                "years": [2003, 2010, 2017, 2021],
                "engine_sizes": ["1.6L", "2.0L", "2.5L"],
                "fuel_types": ["Petrol", "Diesel"],
                "transmissions": ["Manual", "Automatic", 
"Semi-Automatic"],
                "doors": [2, 4, 5]
            }
        };

        function updateOptions() {
            let make = document.getElementById("make").value;
            let options = carOptions[make];

            if (options) {
                updateDropdown("year", options.years);
                updateDropdown("engine_size", options.engine_sizes);
                updateDropdown("fuel_type", options.fuel_types);
                updateDropdown("transmission", options.transmissions);
                updateDropdown("doors", options.doors);
            }
        }

        function updateDropdown(id, values) {
            let dropdown = document.getElementById(id);
            dropdown.innerHTML = '<option value="" disabled 
selected>Select Option</option>';

            values.forEach(value => {
                let option = document.createElement("option");
                option.value = value;
                option.text = value;
                dropdown.appendChild(option);
            });
        }

        function sendPredictionRequest() {
            let formData = {
                "Make": document.getElementById("make").value,
                "Year": parseInt(document.getElementById("year").value),
                "Engine_Size": 
document.getElementById("engine_size").value,
                "Mileage": 
parseInt(document.getElementById("mileage").value),
                "Doors": parseInt(document.getElementById("doors").value),
                "Owner_Count": 
parseInt(document.getElementById("owners").value),
                "Fuel_Type": document.getElementById("fuel_type").value,
                "Transmission": 
document.getElementById("transmission").value
            };

            fetch("/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("result").innerText = "Predicted 
Price: $" + data["Predicted Price"];
            })
            .catch(error => console.error("Error:", error));
        }
    </script>
</body>
</html>

